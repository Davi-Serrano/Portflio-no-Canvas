<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Davi Serrano</title>
</head>
<style>
	body{
		margin: 0;
		padding: 0;
		overflow: hidden;
	}
</style>
<body>
    <canvas width="1800" height="660">  </canvas>


    <script>
        //Variáveis
		//Código das setas do teclado
		var UP = 87, DOWN = 83, LEFT = 65, RIGHT = 68;
		//Variáveis de movimentação
		var moveEsquerda = false, moveDireita = false, moveCima = false, moveBaixo = false;
		//Referência ao canvas
		var cnv = document.querySelector("canvas");
		//dispositivo através do qual desenhamos no canvas
		var ctx = cnv.getContext("2d");
		//Objeto com seus atributos de posicionamento nos eixos X e Y
		var p1 = {
			x: 10,
			y: 10
		};
		//Nave
		var img = new Image();
		img.src = "IMG/Nave.png"
		//Fundo de tela
		var FundoImg = new Image();
		FundoImg.src = "IMG/fundo.jpg"
		
		
		
		//Inicia o loop de animação
		update();

		//Dispara um evento quando uma tecla é pressionada
		window.addEventListener("keydown",keydownHandler);
		//Dispara um evento quando uma tecla é liberada
		window.addEventListener("keyup",keyupHandler);

		//Evento disparado pela tecla pressionada
		function keydownHandler(e){
			//Variável recebe o código da tecla pressionada
			var key = e.keyCode;
			//Esquerda
			if(key === LEFT && key !== RIGHT){
				moveEsquerda = true;
			}
			//Direita
			if(key === RIGHT && key !== LEFT){
				moveDireita = true;
			}
			//Para Cima
			if(key === UP && key !== DOWN){
				moveCima = true;
			}
			//Para Baixo
			if(key === DOWN && key !== UP){
				moveBaixo = true;
			}
				
		}

		//Evento disparado pela tecla liberada
		function keyupHandler(e){
			//Variável recebe o código da tecla liberada
			var key = e.keyCode;
			//Esquerda
			if(key === LEFT && key !== RIGHT){
				moveEsquerda = false;
			}
			//Direita
			if(key === RIGHT && key !== LEFT){
				moveDireita = false;
			}
			//Para Cima
			if(key === UP && key !== DOWN){
				moveCima = false;
			}
			//Para Baixo
			if(key === DOWN && key !== UP){
				moveBaixo = false;
			}
		
		}

		//Função que atualiza os parâmetros de posicionamento do objeto nos eixos X e Y
		function move(){
			//Move para a esquerda
			if(moveEsquerda){
				p1.x-=2;
			}
			//Move para a direita
			if(moveDireita){
				p1.x+= 2;
				
			}
			//Move para cima
			if(moveCima){
				p1.y-=2;
			}
			//Move para baixo
			if(moveBaixo){
				p1.y+=2;
			}
			//Limite de telas
			if( p1.x < 0){
				p1.x =- 0;
			}
			if(p1.y < 0){
				p1.y =- 0;
			}
			//Easter Egg do Buraco de minhoca
			if(p1.y === cnv.height || p1.x === cnv.width){
				alert("Perigo!! Você entrou em um buraco de minhoca, sua nave pode apresentar mal funcionamento, atualize a página para concertar!!")
				p1.x = 0;
				p1.y = 0;
			}
		}


		//Função que desenha o objeto na tela de acordo com os parâmetros de posicionamento do objeto
		function render(){
			//Limpa a tela
			ctx.clearRect(0,0,cnv.width,cnv.height);
			//Desenha o objeto em função de p1.x e p1.y
			ctx.drawImage(FundoImg, 0, 0);
			//Desenha o fundo na tela
			ctx.drawImage(img, p1.x, p1.y);
		}
		//Loop de animação
		function update(){
			//Solicita ao navegador uma animação passando a função e o elemento a ser animado
			requestAnimationFrame(update, cnv);
			//Atualiza os dados do objeto
			move();
			//Desenha o objeto atualizado
			render();
		
		}

    </script>

</body>
</html>